import{a as A,i as l,S as E}from"./assets/vendor-D0cagnvz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const M="47332202-20d723453e83dbf57917d8670";async function h(s,t=20,i){const a="https://pixabay.com/api/";try{return(await A.get(`${a}`,{params:{key:M,q:s,image_type:"photo",orientation:"horizontal",safesearch:!0,page:i,per_page:t}})).data}catch(e){l.error({title:"Error",message:`Error: ${e.message}`})}}function p(s){return s.map(({webformatURL:t,largeImageURL:i,tags:a,likes:e,views:r,comments:d,downloads:v})=>`
        <li class="img-card">
          <div class="img-img">
            <a class="gallery-link" href="${i}">
              <img class="gallery-image" src="${t}" alt="${a}" />
            </a>
          </div>
          <div class="img-info">
            <ul class="img-info-list">
              <li><h3>Likes</h3><p>${e}</p></li>
              <li><h3>Views</h3><p>${r}</p></li>
              <li><h3>Comments</h3><p>${d}</p></li>
              <li><h3>Downloads</h3><p>${v}</p></li>
            </ul>
          </div>
        </li>
      `).join("")}function L(s,t){s.insertAdjacentHTML("beforeend",t),n.classList.replace("hidden","load-more-button")}function f(s){s.innerHTML=""}l.settings({position:"topRight"});const _=document.querySelector(".js-search-form"),$=document.querySelector("#query"),o=document.getElementById("loader"),u=document.querySelector(".image-cards"),n=document.querySelector("#load-more");let m,c=1,g=15,y=300;n.dataset.listenerAttached||(console.log("Adding click listener to loadMoreBtn"),n.addEventListener("click",w),n.dataset.listenerAttached="true");const b=new E(".image-cards a");window.__formSubmitListenerAttached||(_.addEventListener("submit",s=>{if(s.preventDefault(),m=$.value.trim(),c=1,!m){l.warning({title:"Error",message:"Please enter a searched word"});return}console.log("Before enabling loader:",o.classList),o.classList.remove("disabled"),console.log("After enabling loader:",o.classList),h(m,g,c).then(t=>{if(t.hits.length===0){l.warning({title:"No Results",message:"No images found for your query."}),f(u);return}f(u);const i=p(t.hits);if(L(u,i),Math.ceil(t.totalHits/g)<=c){n.classList.add("hidden"),o.classList.add("disabled"),l.warning({title:"No more pages",message:"We're sorry, but you've reached the end of search results."});return}n.classList.replace("hidden","load-more-button");let e=document.querySelector(".img-card");e&&(y=e.getBoundingClientRect().height*2),b.refresh()}).catch(t=>{console.error("Error fetching images:",t),l.error({title:"Error",message:`Failed to fetch images: ${t.message}`})}).finally(()=>{o.classList.add("disabled"),console.log("loader disabled:",o.classList)})}),window.__formSubmitListenerAttached=!0);async function w(){c+=1;try{const s=await h(m,g,c);console.log("Before enabling loader:",o.classList),o.classList.remove("disabled"),await new Promise(a=>setTimeout(a,1500)),console.log(`Loaded ${s.hits.length} images`),console.log("After enabling loader:",o.classList);const t=p(s.hits);L(u,t),o.classList.add("disabled"),console.log("After disabling loader:",o.classList),window.scrollBy({top:y,left:0,behavior:"smooth"});let i=Math.ceil(s.totalHits/g);if(c>=i){n.classList.add("hidden"),o.classList.add("disabled"),l.warning({title:"No more pages",message:"We're sorry, but you've reached the end of search results."});return}b.refresh()}catch(s){l.error({title:"Error",message:`Failed to load more images: ${s.message}`})}finally{o.classList.add("disabled"),console.log("Final loader state:",o.classList)}}window.__loadMoreClickListenerAttached||(n.addEventListener("click",w),window.__loadMoreClickListenerAttached=!0);
//# sourceMappingURL=index.js.map
